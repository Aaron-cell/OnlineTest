<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.ssm.dao.QuestionDao" >
  
  <!-- 查询所有试题 -->
  	<select id="SelectQuestion" resultType="com.ssm.entity.Question">
  	select * from t_library
  	</select>
  	
  	<!-- 查询所有试题（限制） -->
  	<select id="SelectQuestionLimit" resultType="com.ssm.entity.Question">
  	select * from t_library limit #{0},#{1}
  	</select>
  	
  	<!-- 查询一条试题 -->
  	<select id="FindQuestionBytid" resultType="com.ssm.entity.Question" parameterType="int">
  	select * from t_library where tid=#{tid}
  	</select>
  	
  	<!-- 通过题目类型查询一条试题 -->
  	<select id="FindQuestionByType" resultType="com.ssm.entity.Question" parameterType="String">
  	select * from t_library where type=#{type}
  	</select>
  	
 	<select id="LookQuestionBytype" resultType="com.ssm.entity.Question" >
  	select * from t_library where type=#{0} limit #{1},#{2}
  	</select>
  	
  		<!--根据题目 和类型 模糊查询一个题目 -->
  	<select id="FindQuestionBytt" resultType="com.ssm.entity.Question" >
  	select * from t_library where  title like concat('%',#{0},'%') and type=#{1} 
  	</select>
  	
  	<select id="LookQuestion" resultType="com.ssm.entity.Question" >
  	select * from t_library where  title like concat('%',#{0},'%') and type=#{1}  limit #{2},#{3}
  	</select>
  	
  	  	<!-- 模糊查询一个用户 -->
  	<select id="FindQuestionBytitle" resultType="com.ssm.entity.Question" parameterType="String">
  	select * from t_library where title like concat('%',#{title},'%')
  	</select>
  	
  <select id="LookQuestionBytitle" resultType="com.ssm.entity.Question" >
  	select * from t_library where title like concat('%',#{0},'%') limit #{1},#{2}
  </select>
  
  	<!-- 根据写入日期范围查询 -->
  	<select id="FindQuestionByDate" resultType="com.ssm.entity.Question">
  	select * from t_library where date between #{0} and #{1}
  	</select>
  	
  	<select id="LookLibraryLimit" resultType="com.ssm.entity.Question">
  	select * from t_library where date between #{0} and #{1} limit #{2},#{3}
  	</select>
  	
  		<!-- 删除一条试题 -->
  	<select id="DeleteQuestionBytid"  parameterType="int">
  	delete from t_library where tid=#{tid}
  	</select>
  	
  	<!-- 添加试题 -->
  	<insert id="AddQuestion" parameterType="com.ssm.entity.Question" >
  	insert into t_library (tid,type,title,optionA,optionB,optionC,optionD,optionE,correct,score,description,date)
  	value(#{tid},#{type},#{title},#{optionA},#{optionB},#{optionC},#{optionD},#{optionE},#{correct},#{score},#{description},#{date})
  	</insert>
  	<update id="UpdateQuestionBytid" parameterType="com.ssm.entity.Question">
  		update t_library set type=#{type},title=#{title},optionA=#{optionA},optionB=#{optionB},optionC=#{optionC},optionD=#{optionD},optionE=#{optionE},correct=#{correct},score=#{score},score=#{description},date=#{date} 
  		where tid=#{tid}
  		</update>
  	<select id="SelectTestRecordByid" resultType="com.ssm.entity.TestRecord">
  	select * from t_testrecord where testid=#{0}
  	</select>
  	<update id="UpdateTestRecordBytestid">
  		update t_testrecord set libraryid=#{1} where testid=#{0}
  	</update>
  </mapper>